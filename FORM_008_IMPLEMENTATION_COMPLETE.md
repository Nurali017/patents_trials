# ‚úÖ –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø –§–û–†–ú–´ 008 –ó–ê–í–ï–†–®–ï–ù–ê

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–º–∏–≥—Ä–∞—Ü–∏–∏ 0009, 0010, 0011, 0012)**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ `Trial` –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã 008
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `TrialParticipant.statistical_result` (—É–±—Ä–∞–Ω—ã choices, –¥–æ–±–∞–≤–ª–µ–Ω maturity_group_code)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ `TrialResult` –¥–ª—è –¥–µ–ª—è–Ω–æ–∫ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–∞—á–µ—Å—Ç–≤–∞
- ‚úÖ **–ù–û–í–û–ï**: –î–æ–±–∞–≤–ª–µ–Ω –≤–∞—Ä–∏–∞–Ω—Ç "–ù–∞ –æ—Å—É—à–µ–Ω–Ω—ã—Ö –ø–æ—á–≤–∞—Ö" –≤ `growing_conditions` (–º–∏–≥—Ä–∞—Ü–∏—è 0012)
- ‚úÖ –í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

### 2. **–ú–æ–¥–µ–ª–∏ (trials_app/models.py)**
- ‚úÖ **Trial**: –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –¥–ª—è –≥—Ä—É–ø–ø—ã —Å–ø–µ–ª–æ—Å—Ç–∏, –∫–æ–¥–æ–≤ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ–ø—ã—Ç–∞
- ‚úÖ **TrialParticipant**: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω statistical_result, –¥–æ–±–∞–≤–ª–µ–Ω maturity_group_code
- ‚úÖ **TrialResult**: –¥–æ–±–∞–≤–ª–µ–Ω—ã plot_1-4, is_rejected, is_restored
- ‚úÖ **–ú–µ—Ç–æ–¥—ã**: `calculate_statistical_result()` —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ñ–æ—Ä–º—É–ª–æ–π, `get_statistical_result_display()`
- ‚úÖ **–ù–û–í–û–ï**: –û–±–Ω–æ–≤–ª–µ–Ω—ã choices –¥–ª—è `growing_conditions` —Å–æ–≥–ª–∞—Å–Ω–æ —Ñ–æ—Ä–º–µ 008

### 3. **API endpoints (trials_app/views.py)**
- ‚úÖ **GET /form008/**: —Ä–∞—Å—à–∏—Ä–µ–Ω –æ—Ç–≤–µ—Ç —Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏
- ‚úÖ **POST /form008/bulk-save/**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ–ø—ã—Ç–∞ –∏ –¥–µ–ª—è–Ω–æ–∫
- ‚úÖ **GET /form008/statistics/**: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (–≤–≤–µ–¥–µ–Ω–Ω—É—é –≤—Ä—É—á–Ω—É—é)
- ‚úÖ **–ù–û–í–û–ï**: **PATCH /form008/update-conditions/**: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π –∏—Å–ø—ã—Ç–∞–Ω–∏—è (–∞–≥—Ä–æ—Ñ–æ–Ω, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è, —Å–ø–æ—Å–æ–± –≤—ã—Ä–∞—â–∏–≤–∞–Ω–∏—è)

### 4. **–í–∞–ª–∏–¥–∞—Ü–∏—è (trials_app/serializers.py)**
- ‚úÖ **TrialResultSerializer**: –≤–∞–ª–∏–¥–∞—Ü–∏—è –±–∞–ª–ª–æ–≤ (0-5, —à–∞–≥ 0.5), validation_rules
- ‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏—á–∏–Ω—ã –±—Ä–∞–∫–∞ –ø—Ä–∏ is_rejected=True
- ‚úÖ **–ù–û–í–û–ï**: –í–∞–ª–∏–¥–∞—Ü–∏—è choices –¥–ª—è –ø–æ–ª–µ–π —É—Å–ª–æ–≤–∏–π –∏—Å–ø—ã—Ç–∞–Ω–∏—è –≤ API

## üîë –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### **–î–≤–∞ —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—è (–∫–∞–∫ —Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å):**
1. **`maturity_group_code`** - –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–π –∫–æ–¥ –≥—Ä—É–ø–ø—ã —Å–ø–µ–ª–æ—Å—Ç–∏ (1, 2, 3...)
2. **`statistical_result`** - –≥—Ä—É–ø–ø–∞ –ø–æ —Å—Ç–∞—Ç. –æ–±—Ä–∞–±–æ—Ç–∫–µ (–∞–≤—Ç–æ—Ä–∞—Å—á–µ—Ç: +3, -2, 0, +1...)

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –∫–æ–¥–∞ –≥—Ä—É–ø–ø—ã:**
```python
# –§–æ—Ä–º—É–ª–∞ –∏–∑ –º–µ—Ç–æ–¥–∏–∫–∏:
code_group = int((–£_—Å–æ—Ä—Ç–∞ - –£_—Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞) / –ù–°–†‚ÇÄ.‚Çâ‚ÇÖ)
```

### **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–µ–ª—è–Ω–æ–∫:**
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è —É—Ä–æ–∂–∞–π–Ω–æ—Å—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç `value` –∫–∞–∫ —Å—Ä–µ–¥–Ω–µ–µ –∏–∑ plot_1-4
- –ü—Ä—è–º–æ–π –≤–≤–æ–¥ `value` –µ—Å–ª–∏ –¥–µ–ª—è–Ω–∫–∏ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

### **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–ø—ã—Ç–∞ (—Ä—É—á–Ω–æ–π –≤–≤–æ–¥):**
- –ù–°–†‚ÇÄ.‚Çâ‚ÇÖ, E, P% –≤–≤–æ–¥—è—Ç—Å—è –≤—Ä—É—á–Ω—É—é
- –°–∏—Å—Ç–µ–º–∞ –ù–ï —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (—Å–æ–≥–ª–∞—Å–Ω–æ –º–µ—Ç–æ–¥–∏–∫–µ)
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ

### **–£—Å–ª–æ–≤–∏—è –∏—Å–ø—ã—Ç–∞–Ω–∏—è (—Å–æ–≥–ª–∞—Å–Ω–æ —Ñ–æ—Ä–º–µ 008):**
- **–£—Å–ª–æ–≤–∏—è –≤–æ–∑–¥–µ–ª—ã–≤–∞–Ω–∏—è**: `rainfed` (–ë–æ–≥–∞—Ä–∞), `irrigated` (–û—Ä–æ—à–µ–Ω–∏–µ), `drained` (–ù–∞ –æ—Å—É—à–µ–Ω–Ω—ã—Ö –ø–æ—á–≤–∞—Ö), `mixed` (–°–º–µ—à–∞–Ω–Ω–æ–µ)
- **–ê–≥—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω**: `favorable` (–ë–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã–π), `moderate` (–£–º–µ—Ä–µ–Ω–Ω—ã–π), `unfavorable` (–ù–µ–±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã–π)
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è**: `traditional` (–û–±—ã—á–Ω–∞—è), `minimal` (–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è), `no_till` (No-till), `organic` (–û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∞—è)
- **–°–ø–æ—Å–æ–± –≤—ã—Ä–∞—â–∏–≤–∞–Ω–∏—è**: `soil_traditional` (–í –ø–æ—á–≤–µ), `hydroponics` (–ì–∏–¥—Ä–æ–ø–æ–Ω–∏–∫–∞), `greenhouse` (–ó–∞—â–∏—â–µ–Ω–Ω—ã–π –≥—Ä—É–Ω—Ç), –∏ –¥—Ä.

## üìã API –§–æ—Ä–º–∞—Ç

### GET /trials/{id}/form008/
```json
{
  "trial": {
    "maturity_group_code": "1",
    "maturity_group_name": "–°—Ä–µ–¥–Ω–µ—Ä–∞–Ω–Ω—è—è –≥—Ä—É–ø–ø–∞",
    "trial_code": "ALM-2024-001",
    "culture_code": "WHT",
    "predecessor_code": "CRN",
    "lsd_095": 5.2,
    "error_mean": 2.1,
    "accuracy_percent": 3.8
  },
  "statistics": {
    "lsd_095": 5.2,
    "error_mean": 2.1,
    "accuracy_percent": 3.8,
    "has_data": true
  },
  "participants": [
    {
      "id": 50,
      "maturity_group_code": "1",        // –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–π
      "statistical_result": 3,           // –ì—Ä—É–ø–ø–∞ –ø–æ —Å—Ç–∞—Ç. –æ–±—Ä–∞–±–æ—Ç–∫–µ (–ê–í–¢–û)
      "statistical_result_display": "–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –Ω–∞ 3 –ù–°–† (–∫–æ–¥ +3)",
      "current_results": {
        "yield": {
          "value": 101.5,
          "plot_1": 100.0,
          "plot_2": 103.0,
          "plot_3": 101.5,
          "plot_4": 101.5,
          "is_rejected": false,
          "is_restored": false
        }
      }
    }
  ],
  "warnings": [
    {
      "level": "error",
      "message": "‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –ì—Ä—É–ø–ø–∞ —Å–ø–µ–ª–æ—Å—Ç–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–∞!"
    }
  ]
}
```

### POST /trials/{id}/form008/bulk-save/
```json
{
  "is_final": true,
  "statistics": {
    "lsd_095": 5.2,
    "error_mean": 2.1,
    "accuracy_percent": 3.8
  },
  "participants": [
    {
      "participant_id": 50,
      "results": {
        "yield": {
          "plot_1": 84.5,
          "plot_2": 86.1,
          "plot_3": 85.0,
          "plot_4": 85.6
          // value —Ä–∞—Å—Å—á–∏—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
        },
        "seed_weight_1000": {
          "value": 32.9
        }
      }
    }
  ]
}
```

### PATCH /trials/{id}/form008/update-conditions/
```json
{
  "agro_background": "favorable",
  "growing_conditions": "irrigated", 
  "cultivation_technology": "traditional",
  "growing_method": "soil_traditional",
  "harvest_timing": "medium",
  "harvest_date": "2024-09-15",
  "additional_info": "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "Trial conditions updated successfully",
  "trial_id": 123,
  "updated_fields": ["agro_background", "growing_conditions", "cultivation_technology"],
  "trial": {
    "id": 123,
    "agro_background": "favorable",
    "growing_conditions": "irrigated",
    "cultivation_technology": "traditional",
    "growing_method": "soil_traditional",
    "harvest_timing": "medium",
    "harvest_date": "2024-09-15"
  }
}
```

## ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

1. **–ö–†–ò–¢–ò–ß–ù–û**: –ì—Ä—É–ø–ø–∞ —Å–ø–µ–ª–æ—Å—Ç–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–∞
2. **–í–ù–ò–ú–ê–ù–ò–ï**: –ù–°–†‚ÇÄ.‚Çâ‚ÇÖ –Ω–µ –≤–≤–µ–¥–µ–Ω (–Ω–µ–ª—å–∑—è —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –∫–æ–¥—ã –≥—Ä—É–ø–ø)
3. **–í–ù–ò–ú–ê–ù–ò–ï**: –¢–æ—á–Ω–æ—Å—Ç—å –æ–ø—ã—Ç–∞ P>4% –ø—Ä–∏ 4-–∫—Ä–∞—Ç–Ω–æ–π –ø–æ–≤—Ç–æ—Ä–Ω–æ—Å—Ç–∏

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã

1. **–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ TrialResult**: –ø–µ—Ä–µ—Å—á–µ—Ç statistical_result –¥–ª—è —É—Ä–æ–∂–∞–π–Ω–æ—Å—Ç–∏
2. **–ü—Ä–∏ bulk-save**: –ø–µ—Ä–µ—Å—á–µ—Ç –≤—Å–µ—Ö –∫–æ–¥–æ–≤ –≥—Ä—É–ø–ø –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
3. **–ü—Ä–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π

## ‚úÖ –°—Ç–∞—Ç—É—Å

**–í–°–ï –ó–ê–î–ê–ß–ò –í–´–ü–û–õ–ù–ï–ù–´:**
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (–≤–∫–ª—é—á–∞—è 0012)
- ‚úÖ –ú–æ–¥–µ–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
- ‚úÖ API endpoints —Ä–∞—Å—à–∏—Ä–µ–Ω—ã
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞
- ‚úÖ –î–≤–∞ —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –∫–æ–¥–æ–≤ –≥—Ä—É–ø–ø —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–µ–ª—è–Ω–æ–∫ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ **–ù–û–í–û–ï**: –î–æ–±–∞–≤–ª–µ–Ω –≤–∞—Ä–∏–∞–Ω—Ç "–ù–∞ –æ—Å—É—à–µ–Ω–Ω—ã—Ö –ø–æ—á–≤–∞—Ö" –≤ —É—Å–ª–æ–≤–∏—è –≤—ã—Ä–∞—â–∏–≤–∞–Ω–∏—è
- ‚úÖ **–ù–û–í–û–ï**: API –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É—Å–ª–æ–≤–∏–π –∏—Å–ø—ã—Ç–∞–Ω–∏—è –≤ —Ñ–æ—Ä–º–µ 008

**–°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!** üöÄ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
1. **GET** `/trials/{id}/form008/` - –ø–æ–ª—É—á–∏—Ç—å —Ñ–æ—Ä–º—É
2. **POST** `/trials/{id}/form008/bulk-save/` - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
3. **GET** `/trials/{id}/form008/statistics/` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
4. **PATCH** `/trials/{id}/form008/update-conditions/` - –æ–±–Ω–æ–≤–∏—Ç—å —É—Å–ª–æ–≤–∏—è –∏—Å–ø—ã—Ç–∞–Ω–∏—è

–í—Å–µ endpoints –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –Ω–æ–≤—ã–µ –ø–æ–ª—è –∏ –ª–æ–≥–∏–∫—É —Å–æ–≥–ª–∞—Å–Ω–æ –º–µ—Ç–æ–¥–∏–∫–µ —Ñ–æ—Ä–º—ã 008.

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ API:
```bash
# –û–±–Ω–æ–≤–∏—Ç—å —É—Å–ª–æ–≤–∏—è –∏—Å–ø—ã—Ç–∞–Ω–∏—è
curl -X PATCH "http://localhost:8001/api/v1/trials/123/form008/update-conditions/" \
  -H "Content-Type: application/json" \
  -H "Authorization: Token YOUR_TOKEN" \
  -d '{
    "agro_background": "favorable",
    "growing_conditions": "drained",
    "cultivation_technology": "minimal",
    "growing_method": "soil_traditional"
  }'
```
